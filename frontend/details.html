<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonfin for webOS - Media Details</title>
    <link rel="stylesheet" href="css/details.css">
    <script src="webOSTVjs-1.2.11/webOSTV.js" charset="utf-8"></script>
    <script src="webOSTVjs-1.2.11/webOSTV-dev.js" charset="utf-8"></script>
    <script src="js/storage.js" charset="utf-8"></script>
    <script src="js/ajax.js" charset="utf-8"></script>
    <script src="js/keycodes.js" charset="utf-8"></script>
    <script src="js/jellyfin-api.js" charset="utf-8"></script>
    <script src="js/details.js" charset="utf-8"></script>
</head>
<body>
    <!-- Backdrop Background -->
    <div class="backdrop-container">
        <img id="backdropImage" class="backdrop-image" src="" alt="">
        <div class="backdrop-gradient"></div>
    </div>

    <!-- Main Content -->
    <div class="details-container">
        
        <!-- Header with Poster and Main Info -->
        <div class="details-header">
            <div class="poster-section">
                <img id="posterImage" class="poster-image" src="" alt="">
            </div>
            
            <div class="info-section">
                <h1 id="itemTitle" class="item-title"></h1>
                
                <!-- Android TV-style Metadata Info Row -->
                <div class="info-row">
                    <!-- Community Rating -->
                    <div id="communityRating" class="info-badge" style="display: none;">
                        <span class="icon-star">⭐</span>
                        <span id="ratingValue"></span>
                    </div>
                    
                    <!-- Critic Rating -->
                    <div id="criticRating" class="info-badge" style="display: none;">
                        <span id="criticIcon"></span>
                        <span id="criticValue"></span>
                    </div>
                    
                    <!-- Year -->
                    <div id="itemYear" class="info-badge" style="display: none;"></div>
                    
                    <!-- Official Rating (PG, R, TV-MA, etc.) -->
                    <div id="officialRating" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Runtime -->
                    <div id="itemRuntime" class="info-badge" style="display: none;">
                        <span class="icon-time">⏱</span>
                        <span id="runtimeValue"></span>
                    </div>
                    
                    <!-- Resolution -->
                    <div id="itemResolution" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Video Codec -->
                    <div id="videoCodec" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Audio Codec -->
                    <div id="audioCodec" class="info-badge info-badge-pill" style="display: none;"></div>
                    
                    <!-- Subtitles -->
                    <div id="subtitles" class="info-badge info-badge-pill" style="display: none;">CC</div>
                </div>
                
                <!-- Genres Row -->
                <div class="genres-row">
                    <span id="itemGenres" class="genres-text"></span>
                </div>
                
                <p id="itemOverview" class="item-overview"></p>
                
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <div class="btn-wrapper" id="playBtnWrapper">
                        <button id="playBtn" class="btn-action btn-play" tabindex="0">
                            <img src="assets/play.png" alt="Play">
                        </button>
                        <span class="btn-label">Play</span>
                    </div>
                    <div class="btn-wrapper" style="display: none;" id="resumeBtnWrapper">
                        <button id="resumeBtn" class="btn-action btn-secondary" tabindex="0">
                            <img src="assets/resume.png" alt="Resume">
                        </button>
                        <span class="btn-label">Resume</span>
                    </div>
                    <div class="btn-wrapper" style="display: none;" id="shuffleBtnWrapper">
                        <button id="shuffleBtn" class="btn-action btn-secondary" tabindex="0">
                            <img src="assets/shuffle.png" alt="Shuffle">
                        </button>
                        <span class="btn-label">Shuffle</span>
                    </div>
                    <div class="btn-wrapper" style="display: none;" id="trailerBtnWrapper">
                        <button id="trailerBtn" class="btn-action btn-secondary" tabindex="0">
                            <img src="assets/trailer.png" alt="Trailer">
                        </button>
                        <span class="btn-label">Trailer</span>
                    </div>
                    <div class="btn-wrapper">
                        <button id="favoriteBtn" class="btn-action btn-secondary" tabindex="0">
                            <img id="favoriteIcon" src="assets/heart.png" alt="Favorite">
                        </button>
                        <span class="btn-label">Favorite</span>
                    </div>
                    <div class="btn-wrapper">
                        <button id="markPlayedBtn" class="btn-action btn-secondary" tabindex="0">
                            <img src="assets/watched.png" alt="Watched">
                        </button>
                        <span class="btn-label" id="playedText">Watched</span>
                    </div>
                    <div class="btn-wrapper" style="display: none;" id="audioBtnWrapper">
                        <button id="audioBtn" class="btn-action btn-secondary" tabindex="0">
                            <img src="assets/masks.png" alt="Audio">
                        </button>
                        <span class="btn-label">Audio</span>
                    </div>
                    <div class="btn-wrapper" style="display: none;" id="subtitleBtnWrapper">
                        <button id="subtitleBtn" class="btn-action btn-secondary" tabindex="0">
                            <img src="assets/subtitle.png" alt="Subtitles">
                        </button>
                        <span class="btn-label">Subtitles</span>
                    </div>
                    <div class="btn-wrapper" style="display: none;" id="moreBtnWrapper">
                        <button id="moreBtn" class="btn-action btn-secondary" tabindex="0">
                            <img src="assets/more.png" alt="More">
                        </button>
                        <span class="btn-label">More</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Information -->
        <div class="details-body">
            
            <!-- Next Up (for TV Series) -->
            <div id="nextUpSection" class="section" style="display: none;">
                <h2 class="section-title">Next Up</h2>
                <div class="nextup-scroller">
                    <div id="nextUpList" class="nextup-list">
                        <!-- Next up episodes will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Cast & Crew -->
            <div id="castSection" class="section" style="display: none;">
                <h2 class="section-title">Cast & Crew</h2>
                <div class="cast-scroller">
                    <div id="castList" class="cast-list">
                        <!-- Cast items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Seasons (for TV Shows) -->
            <div id="seasonsSection" class="section" style="display: none;">
                <h2 class="section-title">Seasons</h2>
                <div class="seasons-scroller">
                    <div id="seasonsList" class="seasons-list">
                        <!-- Season items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Episodes (for Seasons) -->
            <div id="episodesSection" class="section" style="display: none;">
                <h2 class="section-title">Episodes</h2>
                <div id="episodesList" class="episodes-list">
                    <!-- Episode items will be added here -->
                </div>
            </div>
            
            <!-- Similar Items -->
            <div id="similarSection" class="section" style="display: none;">
                <h2 class="section-title">More Like This</h2>
                <div class="similar-scroller">
                    <div id="similarList" class="similar-list">
                        <!-- Similar items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Extras -->
            <div id="extrasSection" class="section" style="display: none;">
                <h2 class="section-title">Extras</h2>
                <div class="extras-scroller">
                    <div id="extrasList" class="extras-list">
                        <!-- Extra items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Technical Details -->
            <div id="technicalSection" class="section" style="display: none;">
                <h2 class="section-title">Details</h2>
                <div class="technical-info">
                    <div id="technicalDetails" class="technical-details">
                        <!-- Technical details will be added here -->
                    </div>
                </div>
            </div>
            
        </div>
        
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-indicator">
        <div class="spinner"></div>
        <p>Loading details...</p>
    </div>

    <!-- Error Display -->
    <div id="errorDisplay" class="error-display" style="display: none;">
        <h2>Unable to load details</h2>
        <p id="errorText"></p>
        <button id="backBtn" class="btn-primary" tabindex="0">Go Back</button>
    </div>
</body>
</html>
